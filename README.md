# BSON to SQLite Converter

A simple Go tool that converts MongoDB BSON dump files (generated by `mongodump`) along with their metadata.json files into SQLite databases using the modernc SQLite driver.

## Features

- Converts MongoDB BSON dumps to SQLite
- Parses metadata.json files for collection information
- Structured logging with configurable verbosity levels
- Simple command-line interface using Cobra CLI
- Uses modernc.org/sqlite for pure Go SQLite support

## Installation

```bash
go build -o bsontosqlite
```

## Usage

```bash
./bsontosqlite -b collection.bson -m metadata.json -o output.db
```

### Flags

- `-b, --bson`: Path to BSON file (required)
- `-m, --metadata`: Path to metadata.json file (required)  
- `-o, --output`: Output SQLite database file (default: "output.db")
- `-v, --verbose`: Verbose output (-v for info, -vv for debug)

### Examples

Basic conversion:
```bash
./bsontosqlite -b users.bson -m users.metadata.json
```

With verbose logging:
```bash
./bsontosqlite -b users.bson -m users.metadata.json -v
```

With debug logging and custom output:
```bash
./bsontosqlite -b users.bson -m users.metadata.json -vv -o users.db
```

## Database Schema

The tool creates a simple table structure:
- `id`: Auto-incrementing primary key
- `document_id`: MongoDB document _id (as text)
- `data`: Full document as JSON text

Table names are derived from the collection name in metadata.json, with special characters sanitized.